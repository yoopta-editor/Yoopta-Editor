---
title: mergeBlock
description: Merge a block into another block
---

## Overview

The `mergeBlock` method merges the content of one block into another block, typically the previous one.

## Signature

```typescript
Blocks.mergeBlock(editor: YooEditor, options?: MergeBlockOptions): void
```

## Parameters

<ParamField path="editor" type="YooEditor" required>
  The editor instance
</ParamField>

<ParamField path="options" type="MergeBlockOptions">
  Configuration object for merging

  <Expandable title="properties">
    <ParamField path="at" type="number" default="editor.path.current">
      Position of the source block to merge (the one that will be merged into target)
    </ParamField>

    <ParamField path="blockId" type="string">
      ID of the source block to merge
    </ParamField>

    <ParamField path="targetAt" type="number">
      Position of the target block (the one that will receive content). If not provided, uses previous block.
    </ParamField>

    <ParamField path="targetBlockId" type="string">
      ID of the target block to merge into
    </ParamField>

    <ParamField path="focus" type="boolean" default="true">
      Whether to focus the target block after merge
    </ParamField>

    <ParamField path="preserveContent" type="boolean" default="true">
      Whether to preserve content from source block. If `false`, only target block content is kept.
    </ParamField>
  </Expandable>
</ParamField>

## Examples

### Basic Usage

```typescript
import { Blocks } from '@yoopta/editor';

// Merge current block into previous (default behavior)
Blocks.mergeBlock(editor);

// Merge specific block into previous
Blocks.mergeBlock(editor, { at: 5 });

// Merge block at index 5 into block at index 3
Blocks.mergeBlock(editor, {
  at: 5,
  targetAt: 3,
});
```

### Merge by Block IDs

```typescript
// Merge block by IDs
Blocks.mergeBlock(editor, {
  blockId: 'source-block-id',
  targetBlockId: 'target-block-id',
});
```

### Merge Without Preserving Content

```typescript
// Merge but don't preserve source content
Blocks.mergeBlock(editor, {
  preserveContent: false,
});
```

## Use Cases

### Merge on Backspace at Start

```typescript
const handleBackspaceAtStart = (editor: YooEditor) => {
  const currentBlock = Blocks.getBlock(editor, { at: editor.path.current });
  if (!currentBlock) return;

  const slate = Blocks.getBlockSlate(editor, { id: currentBlock.id });
  if (!slate || !slate.selection) return;

  // Check if cursor is at start of block
  const isAtStart = Editor.isStart(slate, slate.selection.anchor, []);
  
  if (isAtStart) {
    Blocks.mergeBlock(editor);
  }
};
```

### Merge Multiple Blocks

```typescript
const mergeMultipleBlocks = (editor: YooEditor, blockIds: string[]) => {
  if (blockIds.length < 2) return;

  const targetBlockId = blockIds[0];
  
  // Merge all other blocks into the first one
  for (let i = 1; i < blockIds.length; i++) {
    Blocks.mergeBlock(editor, {
      blockId: blockIds[i],
      targetBlockId,
      focus: false, // Don't focus during batch merge
    });
  }
  
  // Focus target block at the end
  Blocks.focusBlock(editor, targetBlockId);
};
```

## Notes

<Note>
  By default, the method merges the current block into the previous block. The source block is deleted after merging.
</Note>

<Note>
  If `preserveContent` is `true`, text nodes from both blocks are intelligently merged. Adjacent text nodes are combined.
</Note>

<Note>
  The method automatically positions the cursor at the end of the target block after merging.
</Note>

<Warning>
  Void blocks (blocks that can't accept content) cannot be merged into. The method will silently return if the target block is void.
</Warning>

<Info>
  The method checks if the target block can accept merge by verifying it's not a void block type.
</Info>

## Type Definition

```typescript
type MergeBlockOptions = {
  at?: number; // YooptaPathIndex
  blockId?: string;
  targetAt?: number; // YooptaPathIndex
  targetBlockId?: string;
  focus?: boolean;
  preserveContent?: boolean;
};
```

## Related Methods

<CardGroup cols={2}>
  <Card title="splitBlock" icon="code-branch" href="/api-reference/blocks/split-block">
    Split block (opposite of merge)
  </Card>
  <Card title="deleteBlock" icon="trash" href="/api-reference/blocks/delete-block">
    Remove block after merge
  </Card>
  <Card title="focusBlock" icon="crosshairs" href="/api-reference/blocks/focus-block">
    Focus after merge
  </Card>
</CardGroup>

