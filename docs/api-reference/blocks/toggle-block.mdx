---
title: toggleBlock
description: Transform block type or insert element in leaf
---

## Overview

The `toggleBlock` method transforms a block to a different type (e.g., Paragraph → Heading) or inserts an element in the current leaf, depending on the scope.

## Signature

```typescript
Blocks.toggleBlock(
  editor: YooEditor,
  type: string,
  options?: ToggleBlockOptions
): string
```

## Parameters

<ParamField path="editor" type="YooEditor" required>
  The editor instance
</ParamField>

<ParamField path="type" type="string" required>
  Target block/element type to toggle to (must be a registered plugin type)
</ParamField>

<ParamField path="options" type="ToggleBlockOptions">
  Configuration object for toggling

  <Expandable title="properties">
    <ParamField path="at" type="number" default="editor.path.current">
      Position of the block to toggle
    </ParamField>

    <ParamField path="scope" type="'auto' | 'block' | 'element'" default="'auto'">
      Scope of the toggle operation:
      - `'auto'` - Automatically determine from context (default)
      - `'block'` - Transform the entire block (Paragraph → Heading)
      - `'element'` - Insert element in current leaf with injectElementsFromPlugins
    </ParamField>

    <ParamField path="preserveContent" type="boolean" default="true">
      Whether to preserve existing content. If `true`, text is transferred to the new block/element.
    </ParamField>

    <ParamField path="focus" type="boolean" default="false">
      Whether to focus after toggle
    </ParamField>

    <ParamField path="elements" type="SlateElement">
      Custom element structure created with `editor.y()`. If provided, used instead of default structure.
    </ParamField>
  </Expandable>
</ParamField>

## Return Value

Returns the ID of the toggled block (or original block ID if scope is 'element').

## Examples

### Transform Block Type

```typescript
import { Blocks } from '@yoopta/editor';

// Transform paragraph to heading
Blocks.toggleBlock(editor, 'Heading', {
  preserveContent: true,
});

// Transform to same type (toggles back to Paragraph)
Blocks.toggleBlock(editor, 'Paragraph', {
  scope: 'block',
});
```

### Insert Element in Leaf

```typescript
// Insert element in current leaf (e.g., in callout content)
Blocks.toggleBlock(editor, 'Paragraph', {
  scope: 'element',
  preserveContent: true,
});
```

### Auto Scope Detection

```typescript
// Automatically determines scope based on context
// If current element has injectElementsFromPlugins → element scope
// Otherwise → block scope
Blocks.toggleBlock(editor, 'Heading', {
  scope: 'auto', // default
});
```

### Toggle with Custom Structure

```typescript
// Toggle with custom element structure
Blocks.toggleBlock(editor, 'Accordion', {
  elements: editor.y('accordion-list', {
    children: [
      editor.y('accordion-list-item', {
        props: { isExpanded: true },
        children: [
          editor.y('accordion-list-item-heading'),
          editor.y('accordion-list-item-content')
        ]
      })
    ]
  }),
});
```

## Use Cases

### Toggle Paragraph to Heading

```typescript
const makeHeading = (editor: YooEditor, level: 1 | 2 | 3) => {
  Blocks.toggleBlock(editor, 'Heading', {
    scope: 'block',
    preserveContent: true,
    focus: true,
  });
  
  // Then update to specific heading level
  const block = Blocks.getBlock(editor, { at: editor.path.current });
  if (block) {
    // Update heading level via Elements API
    editor.updateElement({
      blockId: block.id,
      type: `heading-${level}`,
      props: { level },
    });
  }
};
```

### Toggle Back to Paragraph

```typescript
const makeParagraph = (editor: YooEditor) => {
  Blocks.toggleBlock(editor, 'Paragraph', {
    scope: 'block',
    preserveContent: true,
  });
};
```

## Notes

<Note>
  When `scope` is `'block'`, the entire block is transformed. When `scope` is `'element'`, an element is inserted in the current leaf (only works if the current element has `injectElementsFromPlugins`).
</Note>

<Note>
  If toggling to the same type in block scope, it will toggle back to the default block type (Paragraph).
</Note>

<Note>
  The `preserveContent` option extracts text nodes and transfers them to the new block/element structure.
</Note>

<Warning>
  If the target plugin type doesn't exist, an error will be thrown.
</Warning>

<Info>
  The method automatically determines the appropriate root element type for the target plugin if not specified in `elements`.
</Info>

## Type Definition

```typescript
type ToggleBlockOptions = {
  at?: number; // YooptaPathIndex
  scope?: 'auto' | 'block' | 'element';
  preserveContent?: boolean;
  focus?: boolean;
  elements?: SlateElement;
};
```

## Related Methods

<CardGroup cols={2}>
  <Card title="updateBlock" icon="pen" href="/api-reference/blocks/update-block">
    Update block after toggle
  </Card>
  <Card title="splitBlock" icon="code-branch" href="/api-reference/blocks/split-block">
    Split before toggling
  </Card>
</CardGroup>

