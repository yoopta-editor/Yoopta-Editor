---
title: insertElement
description: Create and insert new elements into a block
---

## Overview

The `insertElement` method creates and inserts a new element into a block at a specified position.

## Signature

```typescript
editor.insertElement(options: InsertElementOptions): void
```

## Parameters

<ParamField path="options" type="InsertElementOptions" required>
  Configuration object for inserting the element

  <Expandable title="properties">
    <ParamField path="blockId" type="string" required>
      ID of the block where the element will be inserted
    </ParamField>

    <ParamField path="type" type="string" required>
      Type of element to insert (must be a valid element type for the block's plugin)
    </ParamField>

    <ParamField path="props" type="Record<string, unknown>">
      Properties to set on the new element. Will be merged with default props from plugin configuration.
    </ParamField>

    <ParamField path="children" type="SlateElement[]">
      Child elements to include in the new element. If not provided, default children from plugin configuration will be used.
    </ParamField>

    <ParamField path="at" type="'next' | 'prev' | 'start' | 'end' | number[]">
      Position where to insert the element:
      - `'next'` - Insert after the current element of the same type (relative to selection)
      - `'prev'` - Insert before the current element of the same type (relative to selection)
      - `'start'` - Insert at the beginning of the block
      - `'end'` - Insert at the end of the block
      - `number[]` - Insert at specific Slate path
      
      If not provided, defaults to current selection or `[0]`.
    </ParamField>

    <ParamField path="focus" type="boolean" default="false">
      Whether to focus the editor after insertion. If `true`, focuses the first child element if available.
    </ParamField>

    <ParamField path="select" type="boolean" default="false">
      Whether to select the inserted element after insertion.
    </ParamField>

    <ParamField path="text" type="string">
      Text content for inline elements. For block elements, use `children` instead.
    </ParamField>

    <ParamField path="match" type="(element: SlateElement) => boolean">
      Custom matcher function to find the reference element when using `'next'` or `'prev'` for the `at` option.
    </ParamField>
  </Expandable>
</ParamField>

## Examples

### Basic Usage

```typescript
import { useYooptaEditor } from '@yoopta/editor';

function AccordionControls({ blockId }: Props) {
  const editor = useYooptaEditor();

  const addItem = () => {
    editor.insertElement({
      blockId,
      type: 'accordion-list-item',
      props: { isExpanded: true },
      at: 'end',
      focus: true,
    });
  };

  return <button onClick={addItem}>Add Item</button>;
}
```

### Insert with Children

```typescript
// Insert accordion item with custom children
editor.insertElement({
  blockId: 'accordion-1',
  type: 'accordion-list-item',
  props: { isExpanded: false },
  children: [
    editor.y('accordion-list-item-heading', {
      children: [editor.y.text('New Item Title')]
    }),
    editor.y('accordion-list-item-content', {
      children: [editor.y.text('Item content here')]
    })
  ],
  at: 'next',
});
```

### Insert at Specific Position

```typescript
// Insert at specific path
editor.insertElement({
  blockId: 'accordion-1',
  type: 'accordion-list-item',
  props: { isExpanded: true },
  at: [0, 2], // Insert at third position
});

// Insert at start
editor.insertElement({
  blockId: 'accordion-1',
  type: 'accordion-list-item',
  at: 'start',
});

// Insert at end
editor.insertElement({
  blockId: 'accordion-1',
  type: 'accordion-list-item',
  at: 'end',
});
```

### Insert Relative to Current Element

```typescript
// Insert after current item (next)
editor.insertElement({
  blockId: 'accordion-1',
  type: 'accordion-list-item',
  at: 'next', // Inserts after the current accordion-list-item
  focus: true,
});

// Insert before current item (prev)
editor.insertElement({
  blockId: 'accordion-1',
  type: 'accordion-list-item',
  at: 'prev', // Inserts before the current accordion-list-item
});
```

### Insert Inline Element (Link)

```typescript
// Insert link at current selection
editor.insertElement({
  blockId: 'paragraph-1',
  type: 'link',
  props: { url: 'https://example.com', target: '_blank' },
  text: 'Click here',
  at: 'selection',
});
```

### Insert Table Row

```typescript
// Insert new table row
editor.insertElement({
  blockId: 'table-1',
  type: 'table-row',
  children: [
    editor.y('table-data-cell', { children: [editor.y.text('Cell 1')] }),
    editor.y('table-data-cell', { children: [editor.y.text('Cell 2')] }),
    editor.y('table-data-cell', { children: [editor.y.text('Cell 3')] }),
  ],
  at: 'next',
});
```

### Insert Tab

```typescript
const addTab = (blockId: string) => {
  const tabId = generateId();

  // Insert tab heading
  editor.insertElement({
    blockId,
    type: 'tabs-item-heading',
    props: { id: tabId, active: false },
    children: [editor.y.text('New Tab')],
    at: 'end',
  });

  // Insert corresponding tab content
  editor.insertElement({
    blockId,
    type: 'tabs-item-content',
    props: { referenceId: tabId },
    at: 'end',
  });
};
```

## Use Cases

### Add Accordion Item

```typescript
const addAccordionItem = (blockId: string, afterIndex?: number) => {
  const at = afterIndex !== undefined ? [0, afterIndex + 1] : 'end';

  editor.insertElement({
    blockId,
    type: 'accordion-list-item',
    props: { isExpanded: false },
    at,
    focus: true, // Focus the new item for immediate editing
  });
};
```

### Insert Step

```typescript
const addStep = (blockId: string) => {
  editor.insertElement({
    blockId,
    type: 'step-list-item',
    props: { isCompleted: false },
    children: [
      editor.y('step-list-item-content', {
        children: [editor.y.text('New step description')]
      })
    ],
    at: 'end',
  });
};
```

### Insert with Default Children

```typescript
// If children not provided, plugin defaults will be used
editor.insertElement({
  blockId: 'accordion-1',
  type: 'accordion-list-item',
  props: { isExpanded: true },
  // Children will be created from plugin configuration
  at: 'next',
});
```

### Batch Insert

```typescript
const addMultipleItems = (blockId: string, count: number) => {
  for (let i = 0; i < count; i++) {
    editor.insertElement({
      blockId,
      type: 'accordion-list-item',
      props: { isExpanded: false },
      at: 'end',
    });
  }
};
```

## Advanced Usage

### Insert with Custom Matcher

```typescript
// Insert after a specific element found by matcher
editor.insertElement({
  blockId: 'accordion-1',
  type: 'accordion-list-item',
  at: 'next',
  match: (el) => el.type === 'accordion-list-item' && el.props?.id === 'target-item',
});
```

### Conditional Insert

```typescript
const insertIfNotExists = (blockId: string, itemId: string) => {
  const exists = editor.getElement({
    blockId,
    match: (el) => el.type === 'accordion-list-item' && el.props?.id === itemId,
  });

  if (!exists) {
    editor.insertElement({
      blockId,
      type: 'accordion-list-item',
      props: { id: itemId },
      at: 'end',
    });
  }
};
```

## Notes

<Note>
  If `children` are not provided, the method will automatically create default children based on the plugin's element configuration. This is useful when you want to insert elements with their standard structure.
</Note>

<Note>
  The `at` option `'next'` and `'prev'` require a current selection or a matching element of the same type. If no selection exists, it will fallback to inserting at the end of the block.
</Note>

<Note>
  When `focus` is `true`, the editor will focus the first child element if the inserted element has children. This is useful for immediately allowing the user to start typing.
</Note>

<Warning>
  The element `type` must be a valid element type defined in the block's plugin. Inserting an invalid type will silently fail.
</Warning>

<Info>
  For inline elements (like `link`, `mention`), you can use the `text` parameter to set the text content. For block elements, use the `children` parameter instead.
</Info>

## Type Definition

```typescript
type InsertElementOptions = {
  blockId: string;
  type: string;
  props?: Record<string, unknown>;
  children?: SlateElement[];
  at?: 'next' | 'prev' | 'start' | 'end' | number[];
  focus?: boolean;
  select?: boolean;
  text?: string;
  match?: (element: SlateElement) => boolean;
};
```

## Related Methods

<CardGroup cols={2}>
  <Card title="updateElement" icon="pen" href="/api-reference/elements/update-element">
    Modify inserted element
  </Card>
  <Card title="deleteElement" icon="trash" href="/api-reference/elements/delete-element">
    Remove inserted element
  </Card>
  <Card title="getElement" icon="search" href="/api-reference/elements/get-element">
    Get element after insertion
  </Card>
  <Card title="getElements" icon="list" href="/api-reference/elements/get-elements">
    Get all elements of type
  </Card>
</CardGroup>

